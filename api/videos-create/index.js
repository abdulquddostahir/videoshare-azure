const { containers, requireCreator, uuidv4, verify }=require('../utils.js');module.exports=async function(context,req){const guard=await requireCreator(req);if(guard){context.res=guard;return}const body=req.body||{};const claims=verify(req);const id=uuidv4();const doc={id,title:body.title,publisher:body.publisher,producer:body.producer,genre:body.genre,ageRating:body.ageRating,blobName:body.blobName,contentType:body.contentType,createdAt:new Date().toISOString(),uploader:claims.email};const {videos}=await containers();await videos.items.create(doc);context.res={status:201,body:doc}}