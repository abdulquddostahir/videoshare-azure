import React from 'react'
import { Link } from 'react-router-dom'
import { apiBase } from '../config'
export default function Search(){const [q,setQ]=React.useState('');const [genre,setGenre]=React.useState('');const [list,setList]=React.useState([]);const run=async()=>{const p=new URLSearchParams();if(q)p.append('q',q);if(genre)p.append('genre',genre);const res=await fetch(apiBase()+'/videos/search?'+p.toString());setList(await res.json())};return(<div className='container'><h2>Search</h2><div className='card' style={{display:'flex',gap:'.5rem',alignItems:'center'}}><input placeholder='Title…' value={q} onChange={e=>setQ(e.target.value)}/><select value={genre} onChange={e=>setGenre(e.target.value)}><option value=''>All genres</option>{['Music','Comedy','Education','Gaming','News','Sports','Other'].map(g=><option key={g} value={g}>{g}</option>)}</select><button className='btn' onClick={run}>Search</button></div><div className='grid'>{list.map(v=>(<Link key={v.id} className='card' to={'/video/'+v.id}><h3>{v.title}</h3><div className='small'>{v.genre} · {v.ageRating} · by {v.publisher}</div></Link>))}</div></div>)}
