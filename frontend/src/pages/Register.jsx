import React from 'react'
import { useNavigate } from 'react-router-dom'
import { apiBase } from '../config'
export default function Register(){const [email,setEmail]=React.useState('');const [password,setPassword]=React.useState('');const [msg,setMsg]=React.useState('');const nav=useNavigate();const submit=async()=>{const res=await fetch(apiBase()+'/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok){setMsg(data.error||'Registration failed');return}localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));nav('/')};return(<div className='container'><h2>Register (Consumer)</h2><div className='card'><label>Email</label><input value={email} onChange={e=>setEmail(e.target.value)}/><label>Password</label><input type='password' value={password} onChange={e=>setPassword(e.target.value)}/><button className='btn primary' onClick={submit}>Create account</button><div className='small'>{msg}</div></div></div>)}
